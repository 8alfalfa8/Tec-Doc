# ◆ ECS（Fargate）とEKSの比較

以下では、**実務・設計・運用・監査（金融／公共含む）**の観点から
**ECS（Fargate）と EKS（Kubernetes）** を体系的に比較します。
「どちらを選ぶべきか」が**判断できる**ことをゴールにしています。

---

## 1. 全体サマリー（結論先出し）

| 観点      | ECS（Fargate） | EKS       |
| ------- | ------------ | --------- |
| 学習コスト   | **低**        | 高         |
| 運用負荷    | **非常に低**     | 高         |
| 柔軟性     | 中            | **非常に高い** |
| 標準化     | AWSネイティブ     | CNCF標準    |
| マルチクラウド | 不向き          | **可**     |
| 金融・公共適合 | ◎            | ◎（設計必須）   |
| 中長期拡張性  | ○            | **◎**     |

👉 **短期・安定運用重視 → ECS**
👉 **中長期・標準化・拡張重視 → EKS**

---

## 2. アーキテクチャ比較

### 2.1 基盤構成の違い

#### ECS（Fargate）

```
ALB
 ↓
ECS Service
 ↓
Fargate Task
```

* コントロールプレーン完全マネージド
* ノード管理不要

---

#### EKS

```
ALB
 ↓
Ingress Controller
 ↓
Service
 ↓
Pod
 ↓
Node
```

* Kubernetes制御面の理解必須
* 拡張性・制御力が高い

---

### 2.2 管理責任範囲（Shared Responsibility）

| レイヤ           | ECS Fargate | EKS               |
| ------------- | ----------- | ----------------- |
| OS            | AWS         | AWS               |
| Node          | AWS         | AWS（Managed Node） |
| Orchestration | AWS         | **ユーザ**           |
| NetworkPolicy | 制限あり        | **完全制御**          |
| Admission制御   | 不可          | **可**             |

---

## 3. 機能比較（詳細）

### 3.1 デプロイ・運用

| 項目    | ECS                 | EKS                     |
| ----- | ------------------- | ----------------------- |
| デプロイ  | Rolling / BlueGreen | Rolling / Canary / Argo |
| 設定管理  | Task Definition     | YAML / Helm             |
| 自動回復  | 標準                  | 標準                      |
| CI/CD | CodePipeline簡単      | GitOps前提可               |

---

### 3.2 スケーリング

| 観点     | ECS                 | EKS  |
| ------ | ------------------- | ---- |
| 水平スケール | Service AutoScaling | HPA  |
| 垂直スケール | Task再起動             | VPA  |
| 瞬間起動   | **速い**              | やや遅い |

---

### 3.3 ネットワーク・セキュリティ

| 観点            | ECS       | EKS              |
| ------------- | --------- | ---------------- |
| NetworkPolicy | ❌         | **⭕**            |
| mTLS          | 実装困難      | **Service Mesh** |
| Pod単位IAM      | Task Role | **IRSA**         |
| Ingress制御     | ALB       | ALB / NGINX      |

👉 **ゼロトラスト・内部通信制御はEKSが圧倒的**

---

## 4. セキュリティ・監査（金融／公共）

### 4.1 監査対応力

| 項目     | ECS        | EKS                    |
| ------ | ---------- | ---------------------- |
| 設定可視性  | 高          | 高                      |
| 制御粒度   | 中          | **非常に高**               |
| ポリシー強制 | 制限あり       | **OPA / Kyverno**      |
| 変更検知   | CloudTrail | CloudTrail + K8s Audit |

---

### 4.2 FISC / ISMAP 観点

| 要件       | ECS | EKS     |
| -------- | --- | ------- |
| 権限最小化    | ○   | **◎**   |
| ネットワーク分離 | ○   | **◎**   |
| 操作証跡     | ◎   | ◎       |
| 設定ドリフト   | 制限  | **防止可** |

---

## 5. コスト比較（実務目線）

| 観点     | ECS Fargate | EKS    |
| ------ | ----------- | ------ |
| 初期     | **低**       | 高      |
| 運用人件費  | **低**       | 高      |
| リソース効率 | 中           | **高**  |
| 小規模    | **安い**      | 割高     |
| 大規模    | 割高          | **安い** |

---

## 6. 典型ユースケース別おすすめ

### 6.1 ECSが向くケース

* オンプレ → クラウド移行
* Tomcat / Spring Boot
* 運用要員が少ない
* 金融だが業務ロジック単純

👉 **「まず安定」**

---

### 6.2 EKSが向くケース

* マイクロサービス
* API大量
* 厳格な通信制御
* ベンダーロック回避
* 長期利用（5年以上）

👉 **「将来を見据える」**

---

## 7. 技術選定フローチャート

```
短期移行？
 ├─ Yes → ECS
 └─ No
     ↓
通信制御・拡張性重要？
 ├─ Yes → EKS
 └─ No → ECS
```

---

## 8. 金融・公共向け実務的結論

| 規模     | 推奨           |
| ------ | ------------ |
| 小〜中    | ECS（Fargate） |
| 中〜大    | EKS          |
| 厳格API  | EKS          |
| レガシー移行 | ECS          |

---
