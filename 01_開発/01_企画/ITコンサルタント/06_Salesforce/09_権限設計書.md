# ◆ 権限設計書

（Salesforce／営業CRM・ロール別）


以下は、**Salesforce 営業CRM向け
「権限設計書（営業／管理者／監査ロール別）」**の**実案件テンプレ＋記入例**です。

**金融・公共／内部監査／ISMSレビューにそのまま提出できる粒度**で、
「なぜその権限なのか」まで説明できる構成にしています。

---

## 1. 本書の位置づけ

| 項目  | 内容                    |
| --- | --------------------- |
| 工程  | 基本設計〜詳細設計             |
| 目的  | 最小権限原則に基づくアクセス制御      |
| 対象  | Salesforce 標準＋カスタム    |
| 利用者 | 設計者／監査／運用管理者          |
| 重要性 | **不正操作・情報漏えい防止の根拠資料** |

---

## 2. 権限設計の基本方針（必須記載）

1. **プロファイル最小化**
2. 業務差分は **権限セット** で制御
3. データ参照範囲は **ロール＋共有ルール**
4. 監査ロールは **参照専用・操作不可**
5. Apex／設定権限は原則管理者のみ

---

## 3. ロール設計

### 3.1 ロール階層

```
営業部長
 └ 営業担当
管理部
監査
```

| ロール  | 目的         |
| ---- | ---------- |
| 営業部長 | 配下商談の参照    |
| 営業担当 | 自身の商談管理    |
| 管理部  | 契約・管理業務    |
| 監査   | 全体参照（更新不可） |

---

## 4. プロファイル設計

### 4.1 プロファイル一覧

| プロファイル    | 用途      |
| --------- | ------- |
| CRM_User  | 一般利用者共通 |
| CRM_Admin | システム管理者 |
| CRM_Audit | 監査専用    |

※ 営業／管理の違いは **権限セットで吸収**

---

## 5. 権限セット設計（ロール別）

---

### 5.1 営業ロール

#### 付与権限セット

| 権限セット名                | 内容     |
| --------------------- | ------ |
| CRM_Sales_Base        | 営業基本操作 |
| CRM_Sales_Opportunity | 商談管理   |

#### オブジェクト権限

| オブジェクト      | 参照 | 作成 | 更新 | 削除 |
| ----------- | -- | -- | -- | -- |
| Lead        | ○  | ○  | ○  | ×  |
| Account     | ○  | ○  | ○  | ×  |
| Contact     | ○  | ○  | ○  | ×  |
| Opportunity | ○  | ○  | ○  | ×  |
| Contract__c | ○  | ×  | ×  | ×  |

#### 項目レベル権限（例）

| 項目   | 参照 | 更新 |
| ---- | -- | -- |
| 契約金額 | ○  | ×  |
| 利益率  | ×  | ×  |

---

### 5.2 管理者（業務管理）

#### 付与権限セット

| 権限セット名             | 内容      |
| ------------------ | ------- |
| CRM_Admin_Business | 契約・管理業務 |

#### オブジェクト権限

| オブジェクト      | 参照 | 作成 | 更新 | 削除 |
| ----------- | -- | -- | -- | -- |
| Opportunity | ○  | ×  | ×  | ×  |
| Contract__c | ○  | ○  | ○  | ○  |
| Report      | ○  | ○  | ○  | ×  |

---

### 5.3 システム管理者

#### 付与権限

| 項目    | 内容     |
| ----- | ------ |
| 設定    | 全設定可   |
| Apex  | 作成／変更可 |
| ユーザ管理 | 可      |

※ 人数限定・監査対象

---

### 5.4 監査ロール（重要）

#### 設計思想

* **業務操作不可**
* **履歴・証跡の参照のみ**

#### オブジェクト権限

| オブジェクト      | 参照 | 作成 | 更新 | 削除 |
| ----------- | -- | -- | -- | -- |
| Account     | ○  | ×  | ×  | ×  |
| Opportunity | ○  | ×  | ×  | ×  |
| Contract__c | ○  | ×  | ×  | ×  |
| AuditTrail  | ○  | ×  | ×  | ×  |

#### 特記事項

* データエクスポート不可
* レポート作成不可（参照のみ）

---

## 6. 共有ルール設計

| 対象 | 共有範囲      |
| -- | --------- |
| 商談 | 所有者＋上位ロール |
| 契約 | 管理部＋監査    |

---

## 7. 権限設計 × Fit & Gap対応

| 要件        | 対応     |
| --------- | ------ |
| 営業が契約更新不可 | FLS    |
| 監査が全件参照   | ロール＋共有 |
| 管理者のみ設定変更 | プロファイル |

---

## 8. レビュー・監査チェック観点（必須）

* プロファイルが増えすぎていないか
* Apex権限の付与理由が明確か
* 監査ロールが更新可能になっていないか
* 権限変更履歴は取得可能か

---

## 9. よくあるNG設計（実案件）

❌ 営業ごとにプロファイル作成
❌ 監査に管理者権限付与
❌ 契約項目が営業から更新可能
❌ 権限理由が文書化されていない

---

## 10. 提案で使える一言

> 「Salesforceでは
> プロファイルを最小化し、
> 業務差分を権限セットで管理しています。
> 監査ロールは参照専用です。」

---

（**監査提出用**／**実装用**など用途別に最適化します）

---

