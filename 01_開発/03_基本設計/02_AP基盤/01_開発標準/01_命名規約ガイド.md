# 大規模プロジェクトにおける統合命名規約ガイド

## 1. 基本原則

### 1.1 目的
- **一貫性**: 全ての命名で一貫したルールを適用し、複数チーム・複数プロダクト間で混乱を防ぐ。
- **可読性**: 名前から役割・内容が推測可能、誰が見ても意味が分かる。オンコール/運用が容易。
- **検索性**: ログ、監査、リソース一覧などで容易にフィルタできる。
- **自動化親和性**: CI/CDやIaCでルール化しやすい。
- **簡潔性**: 過度な省略を避けつつ、適切な長さを維持
- **言語統一**: 日本語/英語の混在を最小限に制御

### 1.2 設計原則（優先順位）
- 人間が読んで意味が分かること（意味性）
- 機械で扱いやすいこと（小文字・記号・長さ制限）
- 衝突を避けること（ユニーク性）
- 将来の拡張を考慮する（環境・リージョン・サービスタイプなど）

### 1.3 共通ルール（全領域共通）
- 文字セット：英数字（ASCII）とハイフン -、アンダースコア _、ピリオド . のみ推奨（サービス制約により変える）。日本語は基本的に使用しない。
- ケース：小文字固定（リソース名やファイル名）。ただし、業務、運用、ドキュメントなど既存規定に従い、コード内のクラス名はPascalCase、定数はUPPER_SNAKE_CASEなど言語慣習に従う。
- 区切り：単語区切りは -（kebab-case）をデフォルト。snake_case はDBオブジェクトで採用可。
- 最大長：サービスごとに制限がある（例：S3 63文字）。プロジェクト標準は最大 48 文字を目安にする。
- 環境/リージョン情報：末尾または先頭で短縮コードとして付与（例：-prod, -stg, -dev, -jp1）。
- バージョン：必要時 v1, v2 を末尾（例：payment-api-v2）。
- 禁止事項：個人名や社員ID、可変で頻繁に変わる情報を含めない。

### 1.4 命名構造
```
[プロジェクト識別子]_[ドメイン]_[機能/種類]_[環境/バージョン]
```
※各セグメントは用途に応じて選択適用

## 2. 業務（ビジネス領域）命名規約

### 2.1 業務プロセス
```
<プロジェクトコード>-BP-<プロセス番号>-<サブプロセス>
例: PRJ001-BP-0102-ORDER
```

### 2.2 業務ドメイン
```
DOM_<ドメイン名>_<サブドメイン>
例: DOM_SALES_ORDERMGMT
```

### 2.3 業務エンティティ
```
ENT_<エンティティ名>_<種別>
例: ENT_CUSTOMER_CORPORATE
```

## 3. インフラ命名規約

### 3.1 サーバー命名
```
<環境>-<役割>-<番号>.<リージョン>.<ドメイン>
例: prod-web-01.tokyo.internal
```

#### 役割プレフィックス:
- `web`: Webサーバー
- `app`: アプリケーションサーバー
- `db`: データベースサーバー
- `cache`: キャッシュサーバー
- `mq`: メッセージキュー
- `batch`: バッチサーバー

### 3.2 ネットワークリソース
```
<環境>-<リソース種別>-<用途>-<リージョン>
例: prod-vpc-core-tokyo
```

### 3.3 ストレージ
```
<環境>-<タイプ>-<用途>-<識別子>
例: prod-ebs-db-data-001
```

## 4. ソフトウェア（コード/リポジトリ）命名規約

### 4.1 リポジトリ命名
```
<プロジェクト>-<サービス/コンポーネント>-<タイプ>
例: prj-order-service-backend
```

#### タイプサフィックス:
- `-frontend`: フロントエンド
- `-backend`: バックエンド
- `-library`: ライブラリ
- `-cli`: CLIツール
- `-mobile`: モバイルアプリ

### 4.2 コード命名規約

#### 4.2.1 ファイル構成
```
src/
├── domains/          # ドメイン層
├── application/      # アプリケーション層
├── infrastructure/   # インフラ層
└── interfaces/       # インターフェース層
```

#### 4.2.2 命名規則
- **クラス**: PascalCase（例: `OrderService`）
- **メソッド/関数**: camelCase（例: `calculateTotalAmount`）
- **変数**: camelCase（例: `userAccount`）
- **定数**: UPPER_SNAKE_CASE（例: `MAX_RETRY_COUNT`）
- **インターフェース**: `I`プレフィックス + PascalCase（例: `IRepository`）

## 5. ミドルウェア命名規約

### 5.1 データベース
```
<環境>_<用途>_<タイプ>_<インスタンス>
例: prod_order_rds_primary
```

### 5.2 キャッシュ/メッセージング
```
<環境>-<サービス>-<タイプ>-<クラスタ>
例: prod-user-redis-cluster-01
```

### 5.3 APIゲートウェイ/ロードバランサー
```
<環境>-<対象サービス>-<タイプ>
例: prod-order-api-gateway
```

## 6. システム連携命名規約

### 6.1 APIインターフェース
```
<ドメイン>.<サブドメイン>.<バージョン>.<操作>
例: sales.order.v1.create
```

### 6.2 メッセージキュー/トピック
```
<環境>.<システム>.<イベント>.<バージョン>
例: prod.payment.order.created.v1
```

### 6.3 データ連携
```
<ソース>_<ターゲット>_<データ種別>_<頻度>
例: ERP_SALES_ORDER_DAILY
```

## 7. 運用/管理命名規約

### 7.1 監視アラート
```
<重大度>_<サービス>_<メトリック>_<条件>
例: CRITICAL_ORDER_API_LATENCY_P95
```

### 7.2 バッチジョブ
```
<サービス>_<処理内容>_<実行タイミング>
例: SALES_ORDER_AGGREGATE_DAILY
```

### 7.3 設定ファイル
```
<環境>.<サービス>.<設定種別>.yml
例: production.order.database.yml
```

## 8. ドキュメント命名規約

### 8.1 ドキュメント構造
```
docs/
├── 01-企画/
├── 02-設計/
├── 03-実装/
├── 04-テスト/
├── 05-運用/
└── 06-廃棄/
```

### 8.2 ファイル命名
```
<ドキュメントID>_<タイトル>_<バージョン>.<拡張子>
例: DES-001-02_システム設計書_v1.2.docx
```

### 8.3 ドキュメントID体系
```
<種類><分野>-<連番>-<サブ番号>
```
- **種類**: 
  - `ARC`: アーキテクチャ
  - `DES`: 設計
  - `OPR`: 運用
  - `REF`: 参照資料
- **分野**: `01`（基盤）, `02`（顧客）, `03`（販売）など

## 9. 環境命名規約

### 9.1 環境識別子
- `local`: ローカル開発環境
- `dev`: 開発環境
- `stg`: ステージング環境
- `uat`: ユーザー受け入れテスト環境
- `prod`: 本番環境

### 9.2 環境変数
```
<サービス>_<設定項目>_<環境>
例: ORDER_DB_HOST_STG
```

## 10. バージョン管理規約

### 10.1 バージョン形式
```
<メジャー>.<マイナー>.<パッチ>[-<プレリリース>][+<ビルド>]
例: 2.1.0-rc.1, 1.0.3+20240520
```

### 10.2 タグ命名
```
<環境>/<サービス>/v<バージョン>
例: production/order-service/v2.1.0
```

## 11. 例外と特例

### 11.1 既存システムとの統合
- 既存命名規則がある場合は、移行計画を策定
- ラッパー/アダプター層で命名規則を統一

### 11.2 外部システム連携
- 外部システムの命名規則を尊重
- マッピングテーブルを作成して管理

## 12. 命名規約管理

### 12.1 命名登録プロセス
1. 命名申請（命名申請書の提出）
2. 重複確認（命名レジストリでのチェック）
3. 承認（アーキテクトチームによる承認）
4. 登録（命名レジストリへの登録）

### 12.2 命名レジストリ
- 一元管理された命名データベースの維持
- 定期的な監査と整理の実施
- 廃止された命名のアーカイブ化

## 13. ツールと自動化

### 13.1 推奨ツール
- 静的解析ツール（ESLint, Checkstyleなど）
- インフラストラクチャーコードの命名検証
- CI/CDパイプラインでの命名チェック

### 13.2 自動検証ルール
- 命名規約違反の自動検出
- プルリクエスト時の自動レビュー
- 定期的なレポート生成

---

## 付録A: 用語集（Glossary）

重要な用語の定義と対応する命名規則を維持

## 付録B: 命名例一覧

各カテゴリの具体的な命名例を網羅的に記載

## 付録C: 変更履歴

命名規約の変更履歴と適用時期を管理

---

**最終更新日**: 2024年5月20日  
**適用開始日**: 2024年6月1日  
**レビューサイクル**: 四半期毎（3,6,9,12月）
