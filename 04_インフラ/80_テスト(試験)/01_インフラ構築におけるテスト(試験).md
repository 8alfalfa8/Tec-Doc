# ◆ インフラ構築におけるテスト(試験)

以下は、**インフラ構築プロジェクトにおける各種テスト**（**試験**）について、
**設計 → 実施 → 結果整理 → 評価 → 報告**までを **実務レベル****（**運用・監査対応も意識**）で体系的に整理した説明です。
※金融・公共系／AWS・オンプレ双方に適用できる汎用整理です。

---

## 1. インフラ構築におけるテスト全体像

### 1.1 テストの位置づけ（全体工程）

| フェーズ       | 主目的                      |
| ---------- | ------------------------ |
| 単体試験（構築確認） | 構築したリソースが設計通り存在・設定されているか |
| 結合試験       | コンポーネント間連携が正しく動作するか      |
| 総合試験       | 業務・非機能要件を含めた全体妥当性        |
| 非機能試験      | 性能・可用性・セキュリティ・運用性        |
| 運用試験       | 運用手順・障害対応が実行可能か          |
| 受入試験（UAT）  | 利用者・顧客が要件を満たすと判断できるか     |

---

## 2. テスト設計（テスト設計書の作成）

### 2.1 テスト設計の目的

* **設計要件が「確認可能な形」に落ちているか**
* 属人化を防ぎ、**誰がやっても同じ結果になる試験**

### 2.2 テスト設計書の構成（標準）

#### ① テスト基本情報

* テスト種別（単体／結合／総合／非機能 等）
* 対象システム・環境（検証／本番相当）
* 実施期間
* 実施者・承認者

#### ② テスト対象・範囲

* 対象コンポーネント

  * 例：VPC、EC2、ALB、RDS、IAM、Firewall
* 対象外（明確に記載）

#### ③ テスト観点・要件トレース

* 設計書章番号
* 要件ID（機能／非機能）
* テスト観点（何を確認するか）

#### ④ テストケース定義（最重要）

| No | テスト項目   | 前提条件   | 手順 | 期待結果       | 判定 |
| -- | ------- | ------ | -- | ---------- | -- |
| 1  | EC2起動確認 | AMI作成済 | 起動 | Runningになる | OK |

#### ⑤ 合否基準

* 全件OK
* 軽微不具合は条件付き合格 等

---

## 3. 各テスト種別の詳細

---

### 3.1 単体試験（構築確認試験）

#### 目的

* **設計通りにリソースが構築されているか**

#### 主な確認内容

* リソース存在確認
* 設定値確認
* 起動・停止確認

#### テスト例

| 対象  | 確認内容         |
| --- | ------------ |
| VPC | CIDR、ルートテーブル |
| EC2 | インスタンスタイプ、SG |
| RDS | エンジン、バージョン   |
| IAM | ロール・ポリシー     |

#### 実施方法

* AWS Console / CLI
* 設定値の目視・コマンド確認

#### 成果物

* 単体試験成績書
* 設定値エビデンス（スクショ、CLIログ）

---

### 3.2 結合試験

#### 目的

* **コンポーネント間の接続・連携確認**

#### 主な確認内容

* ネットワーク疎通
* 認証・認可
* データ連携

#### テスト例

| 連携        | 確認           |
| --------- | ------------ |
| ALB → EC2 | HTTP/HTTPS通信 |
| EC2 → RDS | DB接続         |
| App → S3  | Put/Get      |

#### 実施方法

* curl / ping / telnet
* アプリ簡易動作確認

#### 注意点

* FW / SG / NACL の設定漏れが多い
* 名前解決（DNS）が鬼門

---

### 3.3 総合試験

#### 目的

* **システム全体が業務要件を満たすか**

#### 主な確認内容

* 業務シナリオ通りの動作
* 障害時含めた一連の流れ

#### テスト例

* ログイン → 処理 → DB更新 → ログ出力
* 冗長構成の正常系切替

#### 特徴

* アプリ担当と合同実施が多い
* インフラは「裏方」だが責任重い

---

### 3.4 非機能試験

#### 3.4.1 性能試験

| 観点   | 内容          |
| ---- | ----------- |
| 負荷   | 同時接続、TPS    |
| リソース | CPU、Memory  |
| スケール | AutoScaling |

#### 3.4.2 可用性試験

* AZ障害
* EC2停止
* フェイルオーバー

#### 3.4.3 セキュリティ試験

* ポートスキャン
* IAM権限過多確認
* 暗号化設定

#### 成果物

* 非機能試験結果報告書
* 監査証跡

---

### 3.5 運用試験

#### 目的

* **運用できるかの最終確認**

#### 主な試験

* バックアップ／リストア
* 監視アラート
* 障害対応手順実行

#### 重要ポイント

* 手順書通りに作業できるか
* 運用担当者が実施

---

### 3.6 受入試験（UAT）

#### 目的

* **顧客が「OK」と言えるか**

#### 特徴

* 実施主体：顧客
* ベンダーは支援

#### 成果物

* 受入試験結果
* 受入完了サイン

---

## 4. テスト結果整理・評価

### 4.1 テスト結果記録

| No | 結果 | 不具合No   | 備考  |
| -- | -- | ------- | --- |
| 1  | OK | -       |     |
| 2  | NG | INC-001 | 修正中 |

### 4.2 不具合管理

* 影響範囲
* 重要度（Critical / Major / Minor）
* 是正・再試験

---

## 5. テスト報告（試験報告書）

### 5.1 報告書構成

1. 試験概要
2. 実施結果サマリ
3. 不具合一覧
4. 合否判定
5. 残課題・制限事項

### 5.2 経営・監査向けポイント

* **「問題は管理されている」こと**
* 未対応事項の明確化

---

## 6. 実務でよくある失敗と対策

| 失敗      | 対策          |
| ------- | ----------- |
| テストが形骸化 | 設計書と要件を紐付け  |
| エビデンス不足 | 最初から保存ルール定義 |
| 運用試験未実施 | 運用担当を巻き込む   |
| 非機能軽視   | 初期から計画に組込   |

---

### まとめ（重要ポイント）

* **テストは「品質保証」だけではなく「合意形成」**
* 設計・運用・監査をつなぐ要
* インフラは「壊して確認」してこそ完成

---

